FROM debian:jessie

MAINTAINER Wilfried Kakou <wilfried.kakou@smile.ci>

ENV HTTP_PORT 1080
ENV SMTP_PORT 1025

RUN apt-get update && \
    DEBIAN_FRONTEND=noninteractive apt-get install -q -y \
    libsqlite3-dev \
    ruby \
    ruby-dev \
    build-essential && \
    gem install --no-ri --no-rdoc mailcatcher --version 0.5.12 && \
    apt-get remove -y build-essential && \
    apt-get autoremove -y && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists

RUN echo Europe/London > /etc/timezone && dpkg-reconfigure --frontend noninteractive tzdata

EXPOSE 1080 1025

COPY run.sh /run.sh
RUN chmod +x /run.sh
CMD ["/run.sh"]